<html lang="ru">
	<head>
		<link rel="stylesheet" href="./css/ttypography.css" type="text/css" charset="utf-8">
			<link rel="stylesheet" href="./css/problem-statement.css" type="text/css" charset="utf-8">
				<link rel="stylesheet" href="./css/clear.css" type="text/css" charset="utf-8"/>
				<!-- MathJax -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$$$','$$$']], displayMath: [['$$$$$$','$$$$$$']]}
    });
    MathJax.Hub.Register.StartupHook("End", function () {
        Codeforces.runMathJaxListeners();
    });
    </script>
    <!-- /MathJax -->
				<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
				</script>
			</head>
			<body>
<div class="ttypography"><div class="problem-statement"><div class="header"><div class="title">G. Возможные друзья (20 баллов)</div><div class="time-limit"><div class="property-title">ограничение по времени на тест</div>3 секунды<i class="icon-question-sign clickable-title" style="font-size: 0.8em; font-style: normal"
   title="Это соревнование использует политику пересчёта ограничений по времени по языкам программирования.
Система автоматически увеличивает ограничения по времени для некоторых языков в соответствии с множителями.
Независимо от множителя языка, ограничение по времени не может превысить 30 секунд.
Прочтите детали по ссылке ниже списка задач."></i></div><div class="memory-limit"><div class="property-title">ограничение по памяти на тест</div>512 мегабайт</div><div class="input-file"><div class="property-title">ввод</div>стандартный ввод</div><div class="output-file"><div class="property-title">вывод</div>стандартный вывод</div></div><div><p>Во многих социальных сетях у пользователей есть возможность указать других пользователей как своих друзей. Помимо этого, часто существует система рекомендации друзей, которая показывает пользователям людей, с которыми они знакомы косвенно (через кого-то из своих друзей), и предлагает добавить этих людей в список друзей. Вам предстоит разработать систему рекомендации друзей.</p><p>В интересующей нас социальной сети $$$n$$$ пользователей, каждому из которых присвоен уникальный id от $$$1$$$ до $$$n$$$. У каждого пользователя этой сети не более $$$5$$$ друзей. Очевидно, ни один пользователь не является другом самому себе, и если пользователь $$$x$$$ в списке друзей у пользователя $$$y$$$, то и пользователь $$$y$$$ входит в список друзей пользователя $$$x$$$.</p><p>Опишем, как должен формироваться список возможных друзей для каждого пользователя. Для пользователя $$$x$$$ в список должны входить такие пользователи $$$y$$$, что:</p><ul> <li> $$$y$$$ не является другом $$$x$$$ и не совпадает с $$$x$$$; </li><li> у пользователя $$$y$$$ и у пользователя $$$x$$$ есть хотя бы один общий друг; </li><li> не существует такого пользователя $$$y'$$$, который удовлетворяет первым двум ограничениям, и у которого <span class="tex-font-style-bf">строго больше</span> общих друзей с $$$x$$$, чем у $$$y$$$ с $$$x$$$. </li></ul><p>Иными словами, в список возможных друзей пользователя $$$x$$$ входят все такие пользователи, не являющиеся его друзьями, для которых количество общих друзей с $$$x$$$ максимально. Обратите внимание, что список возможных друзей может быть пустым.</p><p>Вы должны написать программу, которая по заданной структуре социальной сети формирует списки возможных друзей для всех пользователей сети.</p><p>Неполные решения этой задачи (например, недостаточно эффективные) могут быть оценены частичным баллом.</p></div><div class="input-specification"><div class="section-title">Входные данные</div><p>В первой строке заданы два целых числа $$$n$$$ и $$$m$$$ ($$$2 \le n \le 50000$$$; $$$0 \le m \le \min(\dfrac{n(n-1)}{2}, \dfrac{5n}{2})$$$) — количество пользователей и количество пар друзей, соответственно.</p><p>Далее следуют $$$m$$$ строк, в каждой из которых заданы два целых числа $$$x_i$$$ и $$$y_i$$$ ($$$1 \le x_i, y_i \le n$$$; $$$x_i \ne y_i$$$) — очередная пара друзей в социальной сети. Каждая пара друзей задается не более одного раза; у каждого пользователя не более $$$5$$$ друзей.</p></div><div class="output-specification"><div class="section-title">Выходные данные</div><p>Для каждого пользователя от $$$1$$$ до $$$n$$$ выведите <span class="tex-font-style-bf">в отдельной строке</span> список его возможных друзей в следующем формате:</p><ul> <li> если список возможных друзей пуст, выведите одно целое число $$$0$$$; </li><li> иначе выведите id возможных друзей пользователя <span class="tex-font-style-bf">в возрастающем порядке</span>. </li></ul></div><div class="sample-tests"><div class="section-title">Примеры</div><div class="sample-test"><div class="input"><div class="title">Входные данные</div><pre>
8 6
4 3
3 1
1 2
2 4
2 5
6 8
</pre></div><div class="output"><div class="title">Выходные данные</div><pre>
4
3
2
1
1 4
0
0
0
</pre></div><div class="input"><div class="title">Входные данные</div><pre>
8 10
1 2
1 3
1 4
4 3
3 2
2 4
1 8
5 6
7 6
5 7
</pre></div><div class="output"><div class="title">Выходные данные</div><pre>
0
8
8
8
0
0
0
2 3 4
</pre></div></div></div><div class="note"><div class="section-title">Примечание</div><p>Рассмотрим первый пример из условия.</p><p>Для начала сформируем списки друзей всех пользователей:</p><ul> <li> друзья пользователя $$$1$$$: $$$[2, 3]$$$. </li><li> друзья пользователя $$$2$$$: $$$[1, 4, 5]$$$. </li><li> друзья пользователя $$$3$$$: $$$[1, 4]$$$. </li><li> друзья пользователя $$$4$$$: $$$[2, 3]$$$. </li><li> друзья пользователя $$$5$$$: $$$[2]$$$. </li><li> друзья пользователя $$$6$$$: $$$[8]$$$. </li><li> друзья пользователя $$$7$$$: $$$[]$$$ (список друзей пуст). </li><li> друзья пользователя $$$8$$$: $$$[6]$$$. </li></ul><p>Рассмотрим, как формируются списки возможных друзей для некоторых пользователей.</p><p>У пользователя $$$1$$$ есть два пользователя, которые не являются его друзьями и с которыми у него есть хотя бы один общий друг: это пользователь $$$4$$$ (общие друзья $$$2$$$ и $$$3$$$) и пользователь $$$5$$$ (общий друг $$$2$$$). С пользователем $$$4$$$ общих друзей больше, поэтому в список возможных друзей попадает только он.</p><p>У пользователя $$$5$$$ есть два пользователя, которые не являются его друзьями и с которыми у него есть хотя бы один общий друг: это пользователь $$$1$$$ (общий друг $$$2$$$) и пользователь $$$4$$$ (общий друг $$$2$$$). Количество общих друзей одинаковое, поэтому оба этих пользователя попадают в список возможных друзей.</p><p>У пользователя $$$7$$$ вообще нет друзей, поэтому ни один пользователь не удовлетворяет требованиям списка возможных друзей.</p></div></div><p>  </p></div>
</div>
            <div id="footer">
                <div>Codeforces (c) Copyright 2010-2023 Михаил Мирзаянов</div>
                <div>Соревнования по программированию 2.0</div>
                    <div style="margin-top: 25px;">
                        На платформе
                    </div>
                    <div style="margin-top: 8px; padding-bottom: 20px;">
                        <img style="margin-right: 1em; height: 60px;" src="./images/codeforces-logo-190x60.png" alt="Codeforces" title="Codeforces"/>
                    </div>
            </div>
			</body>